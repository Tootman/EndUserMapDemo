<!DOCTYPE html>
<html>

<head>
	<title>Leaflet.GridLayer.Vector.Slicer demo</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" />
</head>

<body style='margin:0'>

	<div id="map" style="width: 100vw; height: 100vh"></div>
	<script type="text/javascript" src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"></script>
	<!-- <script type="text/javascript" src="https://unpkg.com/leaflet.vectorgrid"></script> --->
	<!--  not used <script type="text/javascript" src="../dist/Leaflet.VectorGrid.bundled.js"></script> -->
	<script type="text/javascript" src="Leaflet.VectorGrid.chriszrc-bundled.min.js"></script>


	<!-- <script type="text/javascript" src="http://leaflet.github.io/Leaflet.VectorGrid/eu-countries.js"></script> -->
	<!-- <script type="text/javascript" src="RichmondPolygonsAll.js"></script> -->
	<!-- <script type="text/javascript" src="RichmondPointsAll.js"></script> -->
	<script type="text/javascript" src="RichmondAll.js"></script>
	<script>
		var map = L.map('map');

		var cartodbAttribution = '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="http://cartodb.com/attributions">CartoDB</a>';
		var positron = L.tileLayer('http://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}.png', {
			attribution: cartodbAttribution,
			opacity: 1
		}).addTo(map);

		var vectorGrid = L.vectorGrid.slicer(RichmondAll, {
				rendererFactory: L.svg.tile,
				maxZoom: 24,
				minZoom: 14,
				vectorTileLayerStyles: {
					sliced: function(properties, zoom) {
						/*

														*/
						if (properties.asset == "Amenity grass - level") {
							return {
								fillColor: "green",
								fillOpacity: 1,
								stroke: true,
								fill: true,
								color: 'black',
								weight: 1,
								radius: 5
							}
						} else {
							return {
								fillColor: "red",
								fillOpacity: 1,
								stroke: true,
								fill: true,
								color: 'black',
								weight: 1,
								radius: 5
							}
						}
					}
				},
				interactive: true,

				getFeatureId: function(f) {
					return f.properties.Asset || f.properties.asset || f.properties.ASSET;
				}

			})

			.on('mouseover', function(e) {
				var properties = e.layer.properties;
				var label = properties.Asset || properties.ASSET || properties.asset
				L.popup()
					.setContent(label)
					.setLatLng(e.latlng)
					.openOn(map);
				var style = {
					fillColor: 'Red',
					fillOpacity: 1,
					fillOpacity: 1,
					stroke: true,
					fill: true,
					color: 'red',
					opacity: 1,
					weight: 2,
				};

				//vectorGrid.setFeatureStyle(properties.wb_a3, style);
			})
			.addTo(map);
		/*
				var vectorGridPoints = L.vectorGrid.slicer(RichmondPointsAll, {
						rendererFactory: L.svg.tile,
						maxZoom: 24,
						vectorTileLayerStyles: {
							sliced: function(properties, zoom) {
								return {
									weight: 2,
									color: 'purple',
									opacity: 1,
									fillColor: 'green',
									fill: true,
									radius: 4,
									fillOpacity: 4
								}
							}
						},
						interactive: true,
						getFeatureId: function(f) {
							return f.properties.OBJECTID;
						}
					})

					.addTo(map);
		*/

		map.setView({
			lat: 51.430269175539856,
			lng: -0.3615738451480866
		}, 15);
	</script>
</body>

</html>
